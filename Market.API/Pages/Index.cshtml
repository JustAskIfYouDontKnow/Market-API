@page "index" 
<div class="search-section">
	<form id="Search-All-User" method="get">
		<button type="submit">Search All Users</button>
	</form>
	<div id="Search-All-User-results"></div>
</div>
<div class="search-section">
	<form id="search-form" method="get">
		<h2>Find Count of Products in Order</h2>
		<label for="order-id">Enter Order ID:</label>
		<input type="number" id="order-id" name="order-id" required>
			<button type="submit">Search</button>
		</form>
		<div id="search-form-results"></div>
	</div>
<div class="create-user-section">
  <h2>Create User</h2>
  <form id="create-user-form" method="post">
    <label for="first-name">First Name:</label>
    <input type="text" id="first-name" name="firstName" required>
    <label for="last-name">Last Name:</label>
    <input type="text" id="last-name" name="lastName" required>
    <button type="submit">Create User</button>
  </form>
  <div id="create-user-result"></div>
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(function () {
    $('#Search-All-User').on('submit', function (event) {
        event.preventDefault();
        $.ajax({
            url: 'http://localhost:5000/api/User/GetAllUsers',
            success: function (data) {
                var tableRows = '';
                $.each(data, function (i, user) {
                    tableRows += '<tr><td>' + user.id + '</td><td>' + user.firstName + '</td><td>' + user.lastName + '</td></tr>';
                });
                $('#Search-All-User-results').html('<table><thead><tr><th>ID</th><th>First Name</th><th>Last Name</th></tr></thead><tbody>' + tableRows + '</tbody></table>');
            },
            error: function () {
                $('#Search-All-User-results').html('<p>Failed to retrieve users.</p>');
            }
        });
    });
});
</script>
<script>
$(function () {
    $('#search-form').on('submit', function (event) {
        event.preventDefault();
        var orderId = $('#order-id').val();
        $.ajax({
            url: 'http://localhost:5000/api/UserInformation/GetUserProductsInOrdersCount/user-product-ids-count-in-orders?userId=' + orderId,
            success: function (data) {
                var tableRows = '';
                $.each(data.productOrderCounts, function (productId, count) {
                    tableRows += '<tr><td>' + productId + '</td><td>' + count + '</td></tr>';
                });
                $('#search-form-results').html('<table><thead><tr><th>Product ID</th><th>Count In Order</th></tr></thead><tbody>' + tableRows + '</tbody></table>');
            },
            error: function () {
                $('#search-form-results').html('<p>Order not found.</p>');
            }
        });
    });
});
</script>
<script>
$(function () {
                $('#create-user-form').on('submit', function (event) {
                    event.preventDefault();
                    var firstName = $('#first-name').val();
                    var lastName = $('#last-name').val();
                    $.ajax({
                        url: 'http://localhost:5000/api/User/CreateUser?firstName='+firstName+'&lastName='+lastName,
                        type: 'POST',
                     //   data: {firstName: firstName, lastName: lastName},
                        success: function (data) {
                            $('#create-user-result').html('<p>User created with ID ' + data.id + '</p>');
                        },
                        error: function () {
                            $('#create-user-result').html('<p>Failed to create user.</p>');
                        }
                    });
                });
            });
</script>


		
<style>
  body {
    font-family: Arial, sans-serif;
    font-size: 16px;
    line-height: 1.4;
    color: #333;
  }

  .search-section {
    margin: 20px 0;
    border: 1px solid #ddd;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  form {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    width: 100%;
    max-width: 500px;
  }

  label {
    font-weight: bold;
    display: block;
  }

  input[type="number"] {
    width: 100%;
    padding: 8px;
    font-size: 16px;
    border: 1px solid #ddd;
    border-radius: 3px;
    box-sizing: border-box;
  }

  button[type="submit"] {
    padding: 8px 16px;
    font-size: 16px;
    font-weight: bold;
    color: #fff;
    background-color: #007bff;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button[type="submit"]:hover {
    background-color: #0069d9;
  }

  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
  }

  table td,
  table th {
    padding: 8px;
    text-align: left;
    border: 1px solid #ddd;
  }

  table th {
    background-color: #f1f1f1;
    font-weight: bold;
  }
</style>